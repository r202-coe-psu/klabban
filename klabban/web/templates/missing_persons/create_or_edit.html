{% extends "/base/default_page.html" %}
{% import "/components/dialogs.html" as dialog %}
{% import "base/html_renderer.html" as renderer %}
{% from "/components/forms/select-country-dialog.html" import SelectCountryDialog %}


{% if 'edit' in request.path %}
  {% set title_page="แก้ไขผู้อพยพ / Edit Migrant" %}
{% else %}
  {% set title_page="เพิ่มผู้อพยพ / Create Migrant" %}
{% endif %}

{% block content %}
<form class="bg-white rounded-lg p-4" method="POST"
  action="{{ url_for('missing_persons.create_or_edit', missing_person_id=missing_person.id) }}">
  {{ form.csrf_token }}
  <div class="grid grid-cols-2 gap-x-4">
    {# section: missing person information #}
    {{ renderer.base_render(form.title_name) }}
    {{ renderer.base_render(form.first_name) }}
    {{ renderer.base_render(form.last_name) }}
    {{ renderer.base_render(form.age) }}
    {{ renderer.base_render(form.identification_number) }}
    {{ SelectCountryDialog(form.country) }}
    {{ renderer.base_render(form.province_info) }}
    {{ renderer.base_render(form.district_info) }}
    {{ renderer.base_render(form.subdistrict_info) }}
    {{ renderer.base_render(form.address_info) }}
    {{ renderer.base_render(form.missing_person_status) }}

    {# section: additional information #}
    {{ renderer.render_text_area_field(form.physical_mark) }}
    {{ renderer.render_text_area_field(form.statement)}}
    {{ renderer.base_render(form.body_received_date) }}
    {{ renderer.base_render(form.deceased_relationship)}}

    {# section: reporter #}
    {{ renderer.base_render(form.reporter_first_name) }}
    {{ renderer.base_render(form.reporter_last_name) }}
    {{ renderer.base_render(form.reporter_age) }}
    {{ renderer.base_render(form.reporter_identification_number) }}
    {{ SelectCountryDialog(form.reporter_country) }}
    {{ renderer.base_render(form.reporter_province_info) }}
    {{ renderer.base_render(form.reporter_district_info) }}
    {{ renderer.base_render(form.reporter_subdistrict_info) }}
    {{ renderer.base_render(form.reporter_address_info) }}
    {{ renderer.base_render(form.reporter_phone_number) }}
    {{ renderer.base_render(form.code) }}

    {#
    <div class="col-span-2">
      {{ renderer.render_text_area_field(form.remark) }}
    </div>
    #}
  </div>
  {% if duplicated_refugee %}
    <input type="hidden" id="is-confirm-duplicate" name="is_confirm" value="no" />
  {% endif %}
  <div class="modal-action justify-end">
    <a class="btn" href="{{ url_for('missing_persons.index') }}">
      ยกเลิก / Cancel
    </a>
    <button class="btn btn-primary" type="submit" id="submit-refugee-button">
      ยืนยัน / Save
    </button>
  </div>
</form>
{% endblock %}