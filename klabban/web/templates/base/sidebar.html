<div class="drawer-side shadow {{ 'hidden' if not current_user.is_authenticated else '' }} ">
  <label for="drawer-menu" aria-label="close sidebar" class="drawer-overlay h-full"></label>

  <div class="flex flex-col h-full bg-gradient-to-b from-blue-600 to-primary text-white w-64">

    <!-- Header -->
    <div class="px-8 py-5 flex items-center justify-between border-b border-blue-400/30">
      <div class="flex items-center gap-3">
        <div class="p-2 rounded-xl">
          <i class="ph ph-user-check text-2xl"></i>
        </div>
        <div>
          <div class="text-xl font-bold">
            หาคน
          </div>
          {% if current_user.is_authenticated %}
          {{ current_user.get_fullname() }}
          {% endif %}
        </div>
      </div>
    </div>


    <!-- Menu -->
    <div class="flex-grow text-sm menu w-full">
      <ul class="menu gap-2 w-full">

        <li>
          <a class="{{ 'drawer-menu-active' if request.path == url_for('index.index') else '' }}"
            href="{{ url_for('index.index') }}">
            <i class="ph ph-magnifying-glass text-lg"></i>
            หน้าแรก
          </a>
        </li>
        {% if "admin" in current_user.roles %}
        <li>
          <a class="{{ 'drawer-menu-active' if request.path.startswith('/dashboard/admin') else '' }}"
            href="{{ url_for('dashboard.admin_dashboard') }}">
            <i class="ph ph-chart-line text-lg"></i>
            แดชบอร์ดผู้ดูแล
          </a>
        </li>
        {% endif %}
        {% if "admin" in current_user.roles or "refugee_camp_staff" in current_user.roles %}
        <li>
          <a class="{{ 'drawer-menu-active' if request.path.startswith('/dashboard/refugee-camp') else '' }}"
            href="{{ url_for('dashboard.refugee_camp_dashboard') }}">
            <i class="ph ph-chart-line text-lg"></i>
            แดชบอร์ดศูนย์พักพิง
          </a>
        </li>
        {% endif %}
        {% if "admin" in current_user.roles %}
        <li>
          <a class="{{ 'drawer-menu-active' if '/refugee_camps' in request.path else '' }}"
            href="{{ url_for('refugee_camps.index') }}">
            <i class="ph ph-house-line text-lg"></i>
            ศูนย์พักพิง
          </a>
        </li>
        {% endif %}
        <li class="">
          <a class="{{ 'drawer-menu-active' if '/refugees' in request.path and 'view_description' not in request.path else '' }}"
            href="{{ url_for('refugees.index') }}">
            <i class="ph ph-person text-lg"></i>
            ผู้อพยพ
          </a>
        </li>
        {% if "admin" in current_user.roles or "refugee_camp_staff" in current_user.roles %}
        <li>
          <a class="{{ 'drawer-menu-active' if '/refugees' in request.path and 'view_descriptions' in request.path else '' }}" href="{{ url_for('refugees.view_description') }}">
            <i class="ph ph-note text-lg"></i>
            คำร้องจากผู้อพยพ
          </a>
        </li>
        {% endif %}
        {% if "officer" in current_user.roles %}
        <li>
          <a class="{{ 'drawer-menu-active' if '/missing_persons' in request.path else '' }}" href="{{ url_for('missing_persons.index') }}">
            <i class="ph ph-detective text-lg"></i>
            บุคคลสูญหาย - เสียชีวิต
          </a>
        </li>
        {% endif %}
        {% if "admin" in current_user.roles or "refugee_camp_staff" in current_user.roles %}
        <li>
          <a class="{{ 'drawer-menu-active' if '/users' in request.path else '' }}" href="{{ url_for('users.index') }}">
            <i class="ph ph-users text-lg"></i>
            ผู้ใช้งาน
          </a>
        </li>
        {% endif %}
      </ul>
      <ul class="mt-auto menu gap-2 w-full px-2 pb-4">
        {% if current_user.is_authenticated %}
        <li>
          <a class="flex items-center gap-3 px-4 py-3 rounded-xl bg-red-500/80 hover:bg-red-500/100 text-red-200 hover:text-white border border-red-400/30 transition-all duration-200" 
             href="{{ url_for('accounts.logout') }}">
            <i class="ph ph-sign-out text-xl"></i>
            <span class="font-medium">ออกจากระบบ</span>
          </a>
        </li>
        {% else %}
        <li>
          <a class="flex items-center gap-3 px-4 py-3 rounded-xl bg-white/10 hover:bg-white/20 text-white border border-white/30 transition-all duration-200" 
             href="{{ url_for('accounts.login') }}">
            <i class="ph ph-sign-in text-xl"></i>
            <span class="font-medium">เข้าสู่ระบบ</span>
          </a>
        </li>
        {% endif %}
      </ul>
      
    </div>
  </div>
